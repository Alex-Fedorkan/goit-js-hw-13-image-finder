{"version":3,"sources":["webpack:///./templates/image.hbs","webpack:///./js/apiService.js","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","ImagesApiService","this","searchQuery","page","resetPage","getQueryPath","newQuery","newNum","debounce","require","refs","inputEl","document","querySelector","listOfImagesEL","imagesApiService","infScroll","InfiniteScroll","responseType","history","path","clearListOfImages","innerHTML","on","response","pageNum","pageIndex","images","JSON","parse","hits","length","proxyEl","createElement","imagesTpl","parsedItems","querySelectorAll","appendItems","error","title","delay","mouseReset","closerHover","stickerHover","addEventListener","event","preventDefault","query","target","value","loadNextPage","nodeName","linkOnLargeImg","dataset","source","basicLightbox","show"],"mappings":"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","file":"main.3130a2f72033a4ad55ed.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery__item\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img class=\\\"gallery__img\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":39},\"end\":{\"line\":4,\"column\":55}}}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":70},\"end\":{\"line\":4,\"column\":87}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":94},\"end\":{\"line\":4,\"column\":102}}}) : helper)))\n    + \"\\\" width=\\\"400\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":16},\"end\":{\"line\":9,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":16},\"end\":{\"line\":13,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":16},\"end\":{\"line\":17,\"column\":28}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":16},\"end\":{\"line\":21,\"column\":29}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","const API_KEY = '19016514-f636b8f63ee9a8d1bcb803743';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nconst CORS = 'https://cors-anywhere.herokuapp.com/';\r\n\r\nexport default class ImagesApiService {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n\r\n  // async fetchImages() {\r\n  //   const url = `${BASE_URL}?key=${API_KEY}&image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12`;\r\n\r\n  //   const response = await fetch(url);\r\n  //   const images = await response.json();\r\n\r\n  //   return images;\r\n  // }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  getQueryPath() {\r\n    return `${CORS}${BASE_URL}?key=${API_KEY}&image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12`;\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n\r\n  get pageNum() {\r\n    return this.page;\r\n  }\r\n\r\n  set pageNum(newNum) {\r\n    this.page = newNum;\r\n  }\r\n}\r\n","import InfiniteScroll from 'infinite-scroll';\r\nimport imagesTpl from './templates/image.hbs';\r\nimport './styles.css';\r\nimport { error } from '@pnotify/core';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\nimport './css/basicLightbox.min.css';\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport ImagesApiService from './js/apiService';\r\n\r\nconst debounce = require('lodash.debounce');\r\n\r\nconst refs = {\r\n  inputEl: document.querySelector('#search-form > input'),\r\n  listOfImagesEL: document.querySelector('.gallery'),\r\n};\r\n\r\nconst imagesApiService = new ImagesApiService();\r\n\r\nconst infScroll = new InfiniteScroll(refs.listOfImagesEL, {\r\n  responseType: 'text',\r\n  history: false,\r\n  path() {\r\n    return imagesApiService.getQueryPath();\r\n  },\r\n});\r\n\r\ninfScroll.on('load', response => {\r\n  imagesApiService.pageNum = infScroll.pageIndex;\r\n\r\n  const images = JSON.parse(response);\r\n\r\n  if (images.hits.length === 0) {\r\n    error({\r\n      title: 'Bad search request!',\r\n      delay: 3000,\r\n      mouseReset: false,\r\n      closerHover: false,\r\n      stickerHover: false,\r\n    });\r\n    return;\r\n  }\r\n\r\n  const proxyEl = document.createElement('div');\r\n  proxyEl.innerHTML = imagesTpl(images.hits);\r\n\r\n  const parsedItems = proxyEl.querySelectorAll('.gallery__item');\r\n\r\n  infScroll.appendItems(parsedItems);\r\n});\r\n\r\nrefs.inputEl.addEventListener('input', debounce(onInputChange, 750));\r\nrefs.listOfImagesEL.addEventListener('click', onImageClick);\r\n\r\nfunction onInputChange(event) {\r\n  event.preventDefault();\r\n\r\n  imagesApiService.resetPage();\r\n\r\n  imagesApiService.query = event.target.value;\r\n\r\n  if (imagesApiService.query === '') {\r\n    imagesApiService.resetPage();\r\n    clearListOfImages();\r\n    return;\r\n  }\r\n\r\n  clearListOfImages();\r\n\r\n  infScroll.pageIndex = 1;\r\n  infScroll.loadNextPage();\r\n}\r\n\r\nfunction clearListOfImages() {\r\n  refs.listOfImagesEL.innerHTML = '';\r\n}\r\n\r\nfunction onImageClick(event) {\r\n  if (event.target.nodeName !== 'IMG') {\r\n    return;\r\n  }\r\n\r\n  const linkOnLargeImg = event.target.dataset.source;\r\n\r\n  const modal = basicLightbox.create(\r\n    `<img src=\"${linkOnLargeImg}\" width=\"1280\">`,\r\n  );\r\n\r\n  modal.show();\r\n}\r\n"],"sourceRoot":""}